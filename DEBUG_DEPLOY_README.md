# üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ MELSU Portal

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ù–∞ Linux —Å–µ—Ä–≤–µ—Ä–µ:

1. **–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏:**
   ```bash
   chmod +x deploy_debug.sh quick_deploy.sh
   ```

2. **–ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏):**
   ```bash
   ./quick_deploy.sh
   ```

3. **–ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –¥–µ–±–∞–≥–æ–º:**
   ```bash
   ./deploy_debug.sh
   ```

## üêõ –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞
–ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–µ, —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–µ –∏ –∫–∞—Ñ–µ–¥—Ä–µ –≤ —Å–ø–∏—Å–∫–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.

### –î–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### Backend API (`/api/student-access/my-students`)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ API
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º —Å—Ç—É–¥–µ–Ω—Ç–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è faculty_id, department_id, group_id
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–æ–≤ –∏ –∫–∞—Ñ–µ–¥—Ä –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞

#### Frontend (StudentList.jsx)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ API
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥ –ø–µ—Ä–≤–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ getDepartmentName

### –ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏

#### Backend –ª–æ–≥–∏:
```bash
# –û–±—â–∏–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose logs -f backend

# –õ–æ–≥–∏ –≤ —Ñ–∞–π–ª–∞—Ö (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
tail -f backend/logs/melsu_portal.log
tail -f backend/logs/api_debug.log
tail -f backend/logs/sql_debug.log
```

#### Frontend –ª–æ–≥–∏:
```bash
# –õ–æ–≥–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
docker-compose logs -f frontend

# –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ Developer Tools > Console
```

## üîç –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –ë–î
docker-compose exec db psql -U melsu_user -d melsu_portal

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
SELECT 
    u.id, u.first_name, u.last_name,
    up.faculty_id, up.department_id, up.group_id,
    f.name as faculty_name,
    d.name as department_name,
    g.name as group_name
FROM users u 
LEFT JOIN user_profiles up ON u.id = up.user_id 
LEFT JOIN departments f ON up.faculty_id = f.id 
LEFT JOIN departments d ON up.department_id = d.id 
LEFT JOIN groups g ON up.group_id = g.id 
WHERE u.roles::text LIKE '%student%' 
LIMIT 5;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API
```bash
# –¢–µ—Å—Ç API (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_TOKEN –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω)
curl -H "Authorization: Bearer YOUR_TOKEN" \
     "http://localhost:8000/api/student-access/my-students?page=1&size=5" | jq

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
curl http://localhost:8000/health
```

## üìã –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### Backend –ª–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
```
INFO - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123
INFO - –ù–∞–π–¥–µ–Ω–æ 15 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
INFO - –ó–∞–≥—Ä—É–∂–µ–Ω–æ 5 —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 1
INFO - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞ 1: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
INFO - –°—Ç—É–¥–µ–Ω—Ç 1 –∏–º–µ–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å: faculty_id=2, department_id=5, group_id=10
INFO - –ù–∞–π–¥–µ–Ω —Ñ–∞–∫—É–ª—å—Ç–µ—Ç –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ 1: –§–∞–∫—É–ª—å—Ç–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏
INFO - –ù–∞–π–¥–µ–Ω–∞ –∫–∞—Ñ–µ–¥—Ä–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ 1: –ö–∞—Ñ–µ–¥—Ä–∞ –ü–ú–∏–ò
INFO - –ù–∞–π–¥–µ–Ω–∞ –≥—Ä—É–ø–ø–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ 1: 2211-0101.1
INFO - –ò—Ç–æ–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ 1: faculty=–§–∞–∫—É–ª—å—Ç–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏, department=–ö–∞—Ñ–µ–¥—Ä–∞ –ü–ú–∏–ò, group=2211-0101.1
```

### Frontend –ª–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
```javascript
// –í Developer Tools > Console
API Response: {students: [{...}], total: 15, ...}
Students data: [{id: 1, faculty: "–§–∞–∫—É–ª—å—Ç–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏", ...}]
–ü–µ—Ä–≤—ã–π —Å—Ç—É–¥–µ–Ω—Ç: {
  id: 1,
  name: "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  faculty: "–§–∞–∫—É–ª—å—Ç–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏",
  faculty_info: {id: 2, name: "–§–∞–∫—É–ª—å—Ç–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏", ...},
  department: "–ö–∞—Ñ–µ–¥—Ä–∞ –ü–ú–∏–ò",
  department_info: {id: 5, name: "–ö–∞—Ñ–µ–¥—Ä–∞ –ü–ú–∏–ò", ...},
  group_number: "2211-0101.1",
  group_info: {id: 10, name: "2211-0101.1", ...}
}
```

## üõ†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –î–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

### 2. –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ frontend –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è getDepartmentName –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ–±—ä–µ–∫—Ç–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞

### 3. –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö backend
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å joinedload –æ–ø–µ—Ä–∞—Ü–∏–π

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
docker-compose down
docker-compose build --no-cache
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
docker-compose exec backend bash
docker-compose exec db psql -U melsu_user -d melsu_portal

# –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose down -v  # –í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ!
docker-compose up -d
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é `./deploy_debug.sh`:
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://my.melsu.ru/students/list
2. –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12) > Console
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend: `docker-compose logs -f backend`
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ 